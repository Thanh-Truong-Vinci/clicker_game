<main class="game">
  <!-- Overlay d'intro plein écran -->
  <div class="intro-overlay" #introOverlay>
    <div class="intro-content">
      <div class="intro-logo" aria-hidden="true">
        <svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
          <defs>
            <linearGradient id="intro-g" x1="0" x2="1">
              <stop offset="0%" stop-color="#7C4DFF" />
              <stop offset="100%" stop-color="#00E5FF" />
            </linearGradient>
          </defs>
          <path
            fill="url(#intro-g)"
            d="M32 3l7.8 15.8L57 21l-12.5 12 3 17-15.5-8.2L16.5 50l3-17L7 21l17.2-2.2L32 3z"
          />
        </svg>
      </div>
      <h2 class="intro-title">Idle Clicker</h2>
      <p class="intro-subtitle">
        Initialisation du concentrateur d’éclats…
      </p>
    </div>
  </div>

  <!-- HUD en haut -->
  <app-hud
    [title]="title()"
    [money]="money()"
    [perClick]="perClick()"
    [cps]="cps()"
    [autoClickerUnlocked]="autoClickerUnlocked()"
    [fmt]="fmt"
    (resetRequested)="reset()"
  ></app-hud>

  <!-- Layout principal: générateurs / zone centrale / upgrades -->
  <section class="game-layout">
    <!-- Générateurs à gauche -->
    <app-generators-panel
      class="side-panel"
      [generators]="generators()"
      [money]="money()"
      [fmt]="fmt"
      (buy)="buyGenerator($event)"
    ></app-generators-panel>

    <!-- Zone centrale : joyau + combo + FX -->
    <div class="center">
      <app-play-area></app-play-area>
    </div>

    <!-- Améliorations à droite -->
    <app-upgrades-panel
      class="side-panel"
      [upgrades]="upgrades()"
      [money]="money()"
      [fmt]="fmt"
      (buy)="buyUpgrade($event)"
    ></app-upgrades-panel>
  </section>

  <!-- Popup de reset -->
  @if (showResetDialog()) {
    <div class="modal-backdrop">
      <div class="modal" #resetDialog>
        <h2>Réinitialiser la partie ?</h2>
        <p>
          Toute ta progression (éclats, générateurs, améliorations) sera effacée.
        </p>
        <div class="modal-actions">
          <button class="btn-secondary" (click)="cancelReset()">Annuler</button>
          <button class="btn-danger" (click)="confirmReset()">Réinitialiser</button>
        </div>
      </div>
    </div>
  }

  <footer class="footer">
    <p>Projet démo — sauvegarde locale automatique. Aucune donnée personnelle.</p>
  </footer>
</main>
